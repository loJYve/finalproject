<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="rental">

	<resultMap type="vehicle" id="vehicleMap">
		<id column="VEHICLE_ID" property="vehicleId"/>
		<result column="MODEL" property="model"/>
		<result column="NUMBER_PLATE" property="numberPlate"/>
		<result column="RENTAL_STATUS" property="rentalStatus"/>
		<result column="PRODUCT_YEAR" property="productYear"/>
		<result column="RENTALSHOP_ID" property="rentalshopId"/>
		<result column="ACCIDENT_STATUS" property="accidentStatus"/>
		<result column="PRICE" property="price"/>
		<result column="FUEL" property="fuel"/>
		<result column="BOARDING_PERSONNEL" property="boardingPersonnel"/>
		<result column="VEHICLE_GRADE" property="vehicleGrade"/>
		<association property="rentalShop" javaType="rentalshop">
			<id column="RENTALSHOP_ID" property="rentalshopId"/>
			<result column="RENTALSHOP_NAME" property="rentalshopName"/>
			<result column="RENTALSHOP_ADDR" property="rentalshopAddr"/>
			<result column="LATITUDE" property="latitude"/>
			<result column="LONGTITUDE" property="longitude"/>
			<result column="BM_MEMBER" property="bmMember"/>
		</association>
	</resultMap>

	<select id="searchVehicleByGrade" parameterType="string" resultMap="vehicleMap">
		SELECT * FROM VEHICLE JOIN RENTALSHOP USING(RENTALSHOP_ID) WHERE VEHICLE_GRADE=#{vehicleGrade} ORDER BY MODEL, FUEL, PRICE
	</select>
	
	<select id="selectSearchvehicleCount" parameterType="string" resultType="_int">
		SELECT COUNT(*) FROM VEHICLE WHERE VEHICLE_GRADE=#{vehicleGrade}
	</select>

</mapper>